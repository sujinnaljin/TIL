# git의 저장방식 (feat. snapshot & delta)

- git의 히스토리는 개념적으로 **스냅샷의 연속**이자 **델타(Δ 변화량)의 연속**

- Git은 커밋시 각 시점의 **스냅샷을 저장**하기도 하지만 그 스냅샷 사이의 **델타를 저장**하기도 함

- 따라서 **특정 커밋에 Checkout** 하면 그 시점의 **스냅샷**을 얻을 수 있고 그 **커밋과 부모의 커밋을 비교해서(diff) 델타**를 얻을 수도 있음

- 이론적으로 Git은 스냅샷을 저장하기 때문에 1k 짜리를 한 글자씩 고쳐서 10번 수정하면 관리해야하는 용량이 10k가 됨.

- 하지만 적절한 시점에 GC(Garbage Collection)가 실행되면서 **마지막 버전의 파일 하나만 통째로 저장**하고 **이전 버전들은 델타(diff 파일)를 저장**

- 따라서 **최신 커밋**을 체크아웃하면 **파일을 그대로 반환**하고, **이전 커밋**을 체크아웃 하면 **최신 파일에 델타를 적용**해서 반환

- 이렇게 저장하기 때문에 1k 짜리를 한 글자씩 10번 수정해서 커밋해도 관리가 필요한 용량은 거의 1k

- 사실 git이 **마지막 버전의 파일 하나만 스냅샷 방식으로 저장**하고, 그 **이전 버전**들은 모두 **델타를 저장**한다는 말도 **100% 맞는건 아님**. git은 스스로 비교하여 **델타로 저장할지, 아니면 스냅샷으로 저장할지 판단**하여 저장.

  

# 출처

- [Git: 델타와 스냅샷](http://dogfeet.github.io/articles/2012/git-delta.html)
- [git이 저장하는 방식](https://junwoo45.github.io/2019-09-03-git%EC%9D%B4%EC%A0%80%EC%9E%A5%ED%95%98%EB%8A%94%EB%B0%A9%EC%8B%9D/)

